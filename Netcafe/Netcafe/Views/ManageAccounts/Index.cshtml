@using Netcafe.Models
@using Netcafe.Controllers
@model List<Account>

@{
    ViewBag.Title = "Index";
}
<script>
    function changeValue(changedRow, PropName) {
        @((ManageAccountsController)this.ViewContext.Controller).UpdateValue()
    }
</script>
<script>
    function deleteRow(tableID) {
        var table = document.getElementById(tableID).tBodies[0];
        var rowCount = table.rows.length;

        for (var i = 0; i < rowCount; i++) {
            var row = table.rows[i];

            var chkbox = row.cells[0].getElementsByTagName('input')[0];
            if ('checkbox' == chkbox.type && true == chkbox.checked) {
                table.deleteRow(i);
                i--;
                rowCount--;
            }
        }
    }
</script>

<h2>Manage User Accounts</h2>
<table id="accountTable" class="table table-bordered">
    <thead>
        <tr>
            <th></th>
            <th>Id</th>
            <th>Name</th>
            <th>User name</th>
            <th>Email</th>
        </tr>
    </thead>
    <tbody>
        @foreach (Account a in Model)
        {
            <asp:Gridview></asp:Gridview>
            <tr>
                <td><input type="checkbox" name="chk" /></td>
                <td name="id">@a.Id</td>
                <td contenteditable="true" onchange="changeValue(this.row)">@a.Name</td>
                <td contenteditable="true">@a.UserName</td>
                <td contenteditable="true">@a.Email</td>
            </tr>
        }
    </tbody>
</table>
<div class="row">
    <div class="col-md-9">
    </div>
    <div class="col-md-1">
        <input type="button" value="Delete Rows" onclick="deleteRow('accountTable')" />
    </div>
    <div class="col-md-2">
        <input type="button" value="Create account" />
    </div>
</div>